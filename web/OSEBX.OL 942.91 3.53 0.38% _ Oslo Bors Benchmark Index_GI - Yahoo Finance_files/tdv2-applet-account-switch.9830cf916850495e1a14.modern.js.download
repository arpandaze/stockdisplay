(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stores=t.meta=t.controllerViews=void 0;var a=i(n(2585)),s=i(n(2028));function i(e){return e&&e.__esModule?e:{default:e}}var r={AccountSwitch:a.default};t.controllerViews=r;t.meta={dependencies:["tdv2-applet-userintent","tdv2-service-profile"]};var o={UHAccountSwitchStore:s.default};t.stores=o},2028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(29)),s=o(n(1331)),i=o(n(0)),r=o(n(446));function o(e){return e&&e.__esModule?e:{default:e}}var c=(0,s.default)("account-switch:stores:UHAccountSwitchStore"),u=function(e){return["true",!0,"1",1].indexOf(e)>-1},l=(0,a.default)({storeName:"UHAccountSwitchStore",initialize:function(){this.state={site:"fpctx"}},statics:{handlers:{NAVIGATE_SUCCESS:"_handleNavSuccess",ACCOUNT_SWITCH_INIT:"initializeState",FETCH_ACCOUNT_SWITCH_START:"sendRequest",FETCH_ACCOUNT_SWITCH_SUCCESS:"receiveAccountData",FETCH_ACCOUNT_SWITCH_FAILURE:"handleError",FETCH_ACCOUNT_SWITCH_CRUMB_SUCCESS:"receiveCrumb"}},_handleNavSuccess:function(e){var t,n=e&&e.route?e.route:e;return c("_handleNavSuccess","payload",e),(t=(0,i.default)(n,["params","contentSite"]))||(t=(0,i.default)(n,["contentSite"])),t||(t=(0,i.default)(n,["query","site"])),t||(t=(0,i.default)(this.state,["site"],null)),t||(t="fpctx"),c("_handleNavSuccess","site",t),this.state.site!==t&&(this.state.site=t,this.emitChange(),!0)},receiveAccountData:function(e){"string"==typeof e&&(e=(0,r.default)(e));var t=e.users;this.state.users=t,this.state.isFetching=!1,this.state.accountsReceived=!0,this.state.sendRequest=!1,this.emitChange()},receiveCrumb:function(e){c("receiveCrumb",e),e.accountSwitchCrumb&&(this.state.crumb=e.accountSwitchCrumb,this.emitChange())},sendRequest:function(){this.getIsFetching()||!this.getCrumb()||this.getAccountsReceived()||this.getSendRequest()||(this.state.sendRequest=!0,this.state.isFetching=!0,this.emitChange())},handleError:function(){this.state.isFetching=!1,this.state.error=!0,this.state.accountsReceived=!0,this.emitChange()},initializeState:function(e){c("initializeState: ",e);var t=e.config||{},n=t.sendRequest;n=u(n);var a=t.isEnabled;a=u(a),c("sendRequest: ",n),this.state.sendRequest=n,this.state.isEnabled=a,this.emitChange(),c("state",this.state)},getUsers:function(){return this.state.users},getIsEnabled:function(){return u(this.state.isEnabled)},getIsFetching:function(){return this.state.isFetching},getError:function(){return this.state.error},getSendRequest:function(){return this.state.sendRequest},getCrumb:function(){return this.state.crumb},getAccountsReceived:function(){return this.state.accountsReceived},getSite:function(){return this.state.site},dehydrate:function(){return this.state},rehydrate:function(e){return this.state.site=e&&e.site?e.site:this.state.site,this.state.crumb=e&&e.crumb?e.crumb:this.state.crumb,this.state.sendRequest=e&&e.sendRequest?e.sendRequest:this.state.sendRequest,this.state.isEnabled=e&&e.isEnabled?e.isEnabled:this.state.isEnabled,this}});t.default=l},2250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(6)),s=l(n(4)),i=l(n(20)),r=l(n(0)),o=l(n(2599)),c=n(220),u=l(n(1257));function l(e){return e&&e.__esModule?e:{default:e}}var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=(0,i.default)({displayName:"UserInfo",mixins:[u.default],propTypes:{avatarColor:a.default.string,avatarSize:a.default.number,children:a.default.element,fn:a.default.string,ln:a.default.string,alias:a.default.string,em:a.default.string,imageUrl:a.default.string,style:a.default.object,useWelcome:a.default.bool},getDefaultProps:function(){return{avatarSize:40,fn:"",ln:"",alias:"",em:"",imageUrl:"",useWelcome:!1}},contextTypes:{enableAlphatar:a.default.bool},render:function(){var e=(0,r.default)(this.props,["styles"],{}),t=e.main_account,n=this.props.fn,a=this.props.ln,i=n&&a?n+" "+a:n||null,u={color:this.props.avatarColor,enableAlphatar:this.context.enableAlphatar,name:i,size:e.avatar.size||this.props.avatarSize,src:this.props.imageUrl},l=this.props.em||this.props.alias||null;i||l||!this.props.useWelcome||(i=s.default.createElement(c.FormattedMessage,{id:"WELCOME"}));var f=i&&l?null:{lineHeight:u.size+"px"},h=i?s.default.createElement("div",{style:f,className:t.name},i):null,p=l?s.default.createElement("div",{style:f,className:t.alias},l):null;return s.default.createElement("div",{className:t.wrapper},s.default.createElement("div",{className:e.avatar.wrapper},s.default.createElement(o.default,d({},u,{styles:e}))),s.default.createElement("div",{className:t.user_info_wrapper},h,p),this.props.children)}});t.default=f},2585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=k(n(6)),s=k(n(4)),i=k(n(20)),r=k(n(1247)),o=k(n(1331)),c=k(n(0)),u=k(n(2588)),l=k(n(155)),d=k(n(1340)),f=k(n(1611)),h=k(n(234)),p=k(n(421)),m=k(n(429)),g=k(n(71)),v=k(n(2589)),_=k(n(2590)),C=n(1733),S=k(n(2595)),A=k(n(1392)),U=n(1246),y=k(n(1282)),b=n(70),w=k(n(2250)),E=k(n(2600)),R=k(n(2601)),N=n(220),T=k(n(144)),O=k(n(2028)),M=k(n(1287)),I=k(n(11));function k(e){return e&&e.__esModule?e:{default:e}}var H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x=(0,o.default)("account-switch:component:AccountSwitch"),j="undefined"!=typeof window,q=/\{([\s\S]+?)\}/,F=(0,i.default)({mixins:[g.default,v.default],statics:{componentConfig:{name:"componentAccountSwitch"},initializeAction:_.default,storeListeners:[T.default,M.default,O.default]},displayName:"AccountSwitch",propTypes:{accountInfoLink:a.default.element,extraAccountInfoComponent:a.default.oneOfType([a.default.node,a.default.func,a.default.object]),componentConfig:a.default.object,notifications:a.default.element},contextTypes:{session:a.default.object},childContextTypes:{enableAlphatar:a.default.bool},getChildContext:function(){var e=(0,c.default)(this.props,["componentConfig","enableAlphatar"],!1);return{enableAlphatar:["true","1",!0,1].indexOf(e)>-1&&this.state.accountsReceived}},getInitialState:function(){this.UHAccountSwitchStore=this.getStore(O.default),this.UserStore=this.getStore(T.default),this.ProfileStore=this.getStore(M.default),this.RouteStore=this.getStore(I.default),this.replacements=(0,h.default)(this.context.session.dimensions,["intl","lang","partner","site"]);var e=this._getState();return x("initial state",e),e},shouldComponentUpdate:function(e,t){var n=this.state.mainAccountReceived!==t.mainAccountReceived||this.state.accountsReceived!==t.accountsReceived||this.state.menuOpen!==t.menuOpen||this.state.site!==t.site||this.props.notifications!==e.notifications;return x("shouldComponentUpdate: ",n),n},componentWillMount:function(){var e=this;e.addAccountsClickHandler=e._createClickHandler((function(){return e._getUrl("manageUrl",null,!0)})),e.signoutClickHandler=e._createClickHandler((function(){return e._getUrl("logoutUrl",null,!0)}))},componentDidMount:function(){x("componentDidMount: ",this.props),!(this.props.componentConfig||{}).isEnabled||this.state.isFetching||this.state.accountsReceived||this.executeAction(_.default,{componentProps:{componentConfig:{isEnabled:!0,sendRequest:!0}}}),this.state.sendRequest&&this._sendRequest(),this.UserStore.isLoaded()||this.executeAction(A.default,{})},onChange:function(){!this.UHAccountSwitchStore.getSendRequest()||this.state.isFetching||this.state.accountsReceived||this._sendRequest(),this.setState(this._getState())},_shouldRender:function(){var e=this.props.componentConfig||{},t=this.state.accountsReceived||this.state.sendRequest;return e.isEnabled&&(!e.clientRender||j&&t)},render:function(){if(!this._shouldRender())return null;x("render AccountSwitch",this.props),x("state: ",this.state);var e,t=this.state.styles,n=this._isDesktop(),a=this._getMainAccountNode(),i=this.secondaryAccounts,o=i&&i.length>0,c=o?"ACCOUNT_MANAGEMENT":"ADD_ACCOUNT",u=n?this._getSignoutLinkNode():null,l=this.state.accountsReceived?s.default.createElement(E.default,{key:"secondaryAccounts",accounts:i,styles:t,createClickHandler:this._createClickHandler,getUrl:this._getUrl}):null,d=n&&this.props.notifications||null;e=[l,s.default.createElement(R.default,{key:"addAccounts",hasAccounts:o,textId:c,styles:t,manageUrl:this._getUrl("manageUrl"),onClick:this.addAccountsClickHandler}),u],n||(e=s.default.createElement("div",{className:"Mah(0) nr-applet-open_Mah(200px) Ov(h) Trs(menuOpen)"},e));var f=(0,r.default)("td-applet-account-switch",{"nr-applet-open":!n&&this.state.menuOpen});return s.default.createElement("div",{className:f},a,d,e)},_openMenu:function(e){this.setState({menuOpen:!this.state.menuOpen})},_getUrl:function(e,t,n){var a,s=this.props.componentConfig||{},i=[{}],r=s.urlReplacements||[],o=(0,c.default)(s,["urls",e],null);return n&&(this.replacements.doneUrl=this._doneUrl()),o&&(o.query&&o.query.forEach((function(e){l.default.isString(e)&&r.hasOwnProperty(e)&&(e=r[e]),i.push(e)})),a=Object.assign({},o,{host:s.host,query:Object.assign.apply(null,i)}),o=(0,m.default)(a).replace(/\%7B/g,"{").replace(/\%7D/g,"}"),o=(o=(o=this._urlQueryReplace(o,t)).replace(/(\?|&)[A-Za-z0-9_.]+=&/g,"$1")).replace(/(\?|&)[A-Za-z0-9_.]+=$/g,"")),x("_getUrl: '",e,"'",o),o},_urlQueryReplace:function(e,t){for(var n,a,s=Object.assign({},this.replacements,t);n=e.match(q);)n=n[1],a=s.hasOwnProperty(n)&&s[n]||"",e=e.replace(new RegExp("\\{"+n+"\\}","g"),a);return e},_showUserintentManagement:function(){this.executeAction(C.getMutedPublishers,{showManagement:!0})},_getMainAccountNode:function(){var e,t,n,a=this.state.styles,i=this._isDesktop(),r=a.account_switch_main,o=(0,c.default)(this.props,["componentConfig","user_intent"],!1)&&s.default.createElement(b.I13nAnchor,{id:"uh-manage-publishers",className:"Mt(10px) Cur(p) ".concat(r.account_info),onClick:this._showUserintentManagement,i13nModel:f.default.userintentPublishers},s.default.createElement(N.FormattedMessage,{id:"MANAGE_PUBLISHERS_SHORT"}));if(i){var u=this._getUrl("accountInfo"),l="ACCOUNT_INFO",d=this.UserStore.getAlias();d&&d.match(/@yahoo-inc.com/gi)&&(l="BACKYARD",u="https://backyard.yahoo.com/"),n=u?s.default.createElement(b.I13nAnchor,{id:"uh-settings",className:r.account_info,href:u,i13nModel:f.default.accountInfo},s.default.createElement(N.FormattedMessage,{id:l})):null}else e=this._openMenu,t=this.state.accountsReceived?s.default.createElement("div",{className:r.arrow_wrapper},s.default.createElement(U.Icon,{asset:y.default,height:"10",color:r.arrow_color,className:r.arrow})):null;return s.default.createElement("div",{className:r.wrapper,onClick:e},s.default.createElement(w.default,H({useWelcome:!0},this.mainAccount,{styles:a}),t),n,o,this.props.extraAccountInfoComponent)},_updateLink:function(e,t){e&&e.href&&t&&(x("_updateLink",e,t),e.href=t)},_createClickHandler:function(e){var t=this,n=(0,p.default)((function(n){x("link clicked!");var a=e(n);t._updateLink(n.currentTarget,a),window.location=n.currentTarget.href}),3e3,{leading:!0});return function(e){e.preventDefault(),x("preventDefault"),n(e)}},_getSignoutLinkNode:function(){var e=this.state.styles.signed_out,t=this.secondaryAccounts,n=t&&t.length>0?"SIGNOUT_ALL":"SIGNOUT";return s.default.createElement("div",{key:"signout",className:e.wrapper},s.default.createElement(b.I13nAnchor,{id:"uh-signedout",onClick:this.signoutClickHandler,className:e.content,href:this._getUrl("logoutUrl"),i13nModel:f.default.signout},s.default.createElement(N.FormattedMessage,{id:n})))},_sendRequest:function(){x("_sendRequest");var e={requestUrl:this._getUrl("requestUrl")};this.executeAction(S.default,e)},getCurrentUrl:function(){var e;if(j){var t=(0,c.default)(window,["history","state","origUrl"],null);x("url from history: ",t),e=t?{url:t}:null}return e||(e=this.RouteStore.getCurrentNavigate()),x("getCurrentUrl: ",e),e},_doneUrl:function(){var e=this.getCurrentUrl(),t=this.context.session,n=(0,u.default)(e,t.host,t.protocol);return x("pageUrl: ",n),encodeURIComponent(n)},_doneUrlYahoo:function(){var e=this.replacements,t=this.context.session;return(0,c.default)(this.props,["componentConfig","doneUrlYahoo"],null)||d.default.getLogoUrl(e.intl,t.protocol,null,e.partner)},_isDesktop:function(){return"desktop"===this.context.session.dimensions.device},_getState:function(){var e=this.UHAccountSwitchStore,t=e.getAccountsReceived(),n=!!(this.UserStore.getAlias()||this.ProfileStore.getProfile().nickName||this.UserStore.getFirstName()),a=this.replacements,s=e.getSendRequest(),i=e.getSite(),r=e.getUsers();if(a.crumb=e.getCrumb(),a.doneUrl=this._doneUrl(),a.doneUrlYahoo=this._doneUrlYahoo(),a.site=i,"none"===a.partner&&(a.partner=null),t){if(!this.secondaryAccounts&&r){var o=(0,c.default)(this.props,["componentConfig","accountListLength"],3);this.mainAccount=r[0],this.secondaryAccounts=r.slice(1,o)}}else this.mainAccount=n?{alias:this.UserStore.getAlias(),fn:this.UserStore.getFirstName()||this.ProfileStore.getProfile().nickName}:null;return{accountsReceived:t,error:e.getError(),mainAccountReceived:!!this.mainAccount,sendRequest:s,isFetching:e.getIsFetching(),menuOpen:!1,site:i}}});t.default=F},2588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s=(a=n(50))&&a.__esModule?a:{default:a};var i=function(e,t,n){var a="https://www.yahoo.com/",i={protocol:n||"https",host:t||"www.yahoo.com"};if(e)if(e.url){var r=s.default.parse(e.url,!0);r=Object.assign(r,i),a=s.default.format(r)}else a=s.default.format(i);return a};t.default=i},2589:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,((a=n(1331))&&a.__esModule?a:{default:a}).default)("account-switch:mixins:StyleMergeMixin"),i={getInitialState:function(){var e=this.props.componentConfig||{},t=Object.assign({},e.styles,this.props.styles);return s(t),{styles:t}}};t.default=i},2590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1331)),s=r(n(2591)),i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,a.default)("account-switch:actions:initAccountSwitch");var c=function(e,t,n){var a=(0,i.default)(t,["componentProps","componentConfig"],{});if("undefined"==typeof window&&"client"===a.mode)return e.dispatch("ACCOUNT_SWITCH_INIT",{config:a}),n&&n();e.executeAction(s.default,t,(function(t){if(t)return o("error fetching crumb"),n&&n(t);var s={config:a};return o("data: ",s),e.dispatch("ACCOUNT_SWITCH_INIT",s),n&&n()}))};t.default=c},2591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(1331)),s=i(n(2028));function i(e){return e&&e.__esModule?e:{default:e}}var r=(0,a.default)("account-switch:actions:fetchAccountSwitchCrumbs");var o=function(e,t,n){var a=e.getStore(s.default).getCrumb();if(a&&"undefined"!==a)return n&&n();e.dispatch("FETCH_ACCOUNT_SWITCH_CRUMB_START"),e.service.read("AccountSwitchCrumbService",{},{},(function(t,a){return r("UHCrumbs data",a),t||!a?(e.dispatch("FETCH_ACCOUNT_SWITCH_CRUMB_FAIL",t),n(t,null)):(e.dispatch("FETCH_ACCOUNT_SWITCH_CRUMB_SUCCESS",{accountSwitchCrumb:encodeURIComponent(a.accountSwitchCrumb)}),n&&n())}))};t.default=o},2595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(1331)),s=i(n(1735));function i(e){return e&&e.__esModule?e:{default:e}}var r=(0,a.default)("account-switch:actions:fetchAccounts"),o=!1;var c=function(e,t,n){var a=e.getStore("UHAccountSwitchStore"),i=e.getStore("UserStore"),c=t.requestUrl,u=i.isSignedIn()||i.isRecognized();if(!o&&a.getIsEnabled()&&u&&!a.getAccountsReceived()&&c){r("fetching account switch accounts"),o=!0;var l=t.timeout||3e3;(0,s.default)(c,{timeout:l,name:"processDeviceUsers"},(function(t,a){a&&e?e.dispatch("FETCH_ACCOUNT_SWITCH_SUCCESS",a):e.dispatch("FETCH_ACCOUNT_SWITCH_FAILURE"),n&&n()}))}else r("skipping account fetch"),n&&n()};t.default=c},2599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(6)),s=l(n(4)),i=l(n(20)),r=l(n(0)),o=n(1246),c=l(n(1441)),u=l(n(1257));function l(e){return e&&e.__esModule?e:{default:e}}var d=/(profile_|39361574426_98028a_)/,f=(0,i.default)({displayName:"Avatar",mixins:[u.default],propTypes:{src:a.default.string,size:a.default.number,name:a.default.string,enableAlphatar:a.default.bool},getDefaultProps:function(){return{src:"",size:34,name:"",enableAlphatar:!1}},render:function(){var e,t=this.props.src,n=this.props.size,a=this.props.name,i=(0,r.default)(this.props,["styles","avatar"],{}),u=i.iconStyle||{},l=i.imgStyle||{},f=this.props.color||i.color;if(!t||d.test(t)){t=null;var h=a?a.toUpperCase().charCodeAt(0):null;h=h&&h>=65&&h<=90?String.fromCharCode(h):null,this.props.enableAlphatar&&h&&(t="https://s.yimg.com/rz/uh/alphatars/"+h+".png"),t||(e=s.default.createElement(o.Icon,{asset:c.default,height:n,color:f,style:u}))}return t&&(a&&a.match(/@yahoo-inc.com/gi)&&(t="https://backyard.yahoo.com/isweb-icons/staff/"+a.replace("@yahoo-inc.com","")+"_square.jpg"),l=Object.assign(l,{backgroundImage:"url("+t+")",backgroundSize:"cover",borderRadius:n,height:n,width:n}),e=s.default.createElement("i",{className:i.content,style:l})),e}});t.default=f},2600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(n(4)),s=h(n(6)),i=h(n(20)),r=h(n(1331)),o=n(70),c=h(n(1361)),u=h(n(0)),l=h(n(1611)),d=h(n(1257)),f=h(n(2250));function h(e){return e&&e.__esModule?e:{default:e}}var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m=(0,r.default)("account-switch:components:SecondaryAccounts"),g=(0,i.default)({displayName:"SecondaryAccounts",autobind:!1,mixins:[d.default],propTypes:{accounts:s.default.array,createClickHandler:s.default.func,getUrl:s.default.func},componentWillUnmount:function(){this.navTimer&&(clearTimeout(this.navTimer),this.navTimer=null)},render:function(){var e=this.props,t=e.accounts,n=(0,u.default)(e,["styles","secondary_accounts"],{}),s=n.list_item,i=n.anchor,r=n.avatarColor;m("render SecondaryAccounts"),m(t);var d=l.default.secondaryAccounts,h=(0,c.default)(t,(function(t,n){var c=e.createClickHandler((function(n){return e.getUrl("switchUrl",t,!0)}));return a.default.createElement("li",{key:t.alias,className:s},a.default.createElement(o.I13nAnchor,{onClick:c,className:i,follow:!1,href:e.getUrl("switchUrl",t),i13nModel:Object.assign({},d,{cpos:n+1})},a.default.createElement(f.default,p({avatarColor:r},t,{styles:e.styles}))))}));return a.default.createElement("ul",{className:n.list},h)}});t.default=g},2601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=f(n(6)),s=f(n(4)),i=f(n(20)),r=f(n(0)),o=f(n(1247)),c=f(n(1611)),u=n(70),l=n(220),d=f(n(1257));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,i.default)({displayName:"AddAccounts",mixins:[d.default],propTypes:{i13n:a.default.object,defaultStyle:a.default.object,manageUrl:a.default.string,onClick:a.default.func,textId:a.default.string},getDefaultProps:function(){return{hasAccounts:!1,manageUrl:""}},render:function(){var e=(0,r.default)(this.props,["styles","add_accounts"],{}),t=(0,o.default)(e.wrapper,"acct-switch-manage");return s.default.createElement(u.I13nAnchor,{onClick:this.props.onClick,className:t,href:this.props.manageUrl,i13nModel:c.default.addAccount},s.default.createElement("div",{className:e.icon_wrapper},s.default.createElement("i",{className:e.icon_content},"+")),s.default.createElement("span",{className:e.text},s.default.createElement(l.FormattedMessage,{id:this.props.textId})))}});t.default=h}}]);